---
layout: post
title: 视觉里程计 | 视觉SLAM十四讲-ch7
date: 2022-03-28
categories: 技术 
tags: 视觉SLAM十四讲 SLAM 视觉里程计 odomotry
---
> 本讲开始，进入到实践应用部分。这节讲基于特征法的视觉里程计。

## 1 术语表

| 中文名称 | 英文名称                                              |
| :------- | :---------------------------------------------------- |
| 视觉里程计 | Visual Odometry, VO                                  |
| 对极几何 | epipolar geometry                              |
| 极平面 | epipolar plane                              |
| 极点 | epipoles                              |
| 极线 | epipolar line                              |

## 2 视觉里程计概述

视觉里程计，根据相邻图像的信息估计出粗略的相机运动。如果有后端，可给后端提供较好的初始值。

算法可分为两大类：*特征点法*和*直接法*； 特征点法具有稳定，对光照、动态物体不敏感的优势，但耗时大；
直接法直接基于像素，少了特征提取步骤，耗时有所改善。

特征点法分 2 个步骤： 1. 提取特征，找到匹配的点 2. 基于匹配的点，计算相机的运动（里程计） 

## 3 特征提取方法&匹配

特征点法提取特征，产出两类东西：关键点（Key-point）、描述子(Descriptor)。
关键点指特征点在图像中的位置，还可能包括朝向、大小信息；描述子按照“外观相似的特征应该有相似的描述子”设计，
期望通过描述子在向量空间的相似度来表征特征点的匹配性。

书上主要列了3个特征提取方法：

1. FAST角点法, 只能检测角点,特征不稳定；
2. SIFT(尺度不变特征变换， Scale-Invariant Feature Transform). SIFT效果很好，但是速度慢；
3. ORB（Oriented FAST and Rotated BRIEF）, 质量和性能的折衷。

**ORB方法**: 分别改进了 FAST角点法做特征点选择 和 BRIEF(Binary Robust Independent Elementary 
Feature). 原始FAST方法比较中心点和周围半径为3的点的亮度，如果亮度差异>T的个数超过N个，就认为是一个特征点；
改进的FAST称为 Orinted FAST: 增加非极大值抑制（Non-maximal suppresion）防止角点集中问题；针对其无尺度、
方向性问题，分别增加图像金字塔和灰度质心法。BRIEF是二进制描述子，通过对每个关键点附近随机取两个点，
比较亮度关系（大为1，小为0），得到一串0、1构成的向量作为描述子。其不具备旋转不变性。改进的BRIEF称为
Steer BRIEF: ORB结合Oriented FAST中获取的方向信息，计算旋转后的结果，因此具备良好的旋转不变性。

有了描述子之后，就可以基于描述子对关键点做匹配。描述子是向量，所以这块就是向量最近邻查找，就和 ANN 算法关联上了。
这块算比较成熟了，调包即可。书上说的库是 FLANN, 我所知常用的还有 Faiss, Annoy, Hnswlib 等。

## 4 计算相机运动

基于前后时刻两帧的一组特征匹配点，我们可以用来估计相机的运动，即计算 $R$, $t$, $P_w$。

根据相机、点的类型，估计的方法可以分为对极几何（2D-2D), ICP（3D-3D），PnP（3D-2D）.

