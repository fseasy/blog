---
layout: post
title: LangChain å­¦ä¹ 
date: 2023-03-25
categories: æŠ€æœ¯ 
tags: LangChain LLM
---
> è®© LLM(Large Language Model) è°ƒç”¨å¤–éƒ¨å·¥å…·å½¢æˆæ›´å¼ºå¤§çš„åº”ç”¨ï¼Œè¿™åœ¨æœ€è¿‘æˆäº†ä¸€ä¸ªè¶‹åŠ¿ã€‚
ä» LaMDA, ToolFormer åˆ° Visual ChatGPT å†åˆ°å¼•è½°åŠ¨çš„ ChatGPT plugins,
æˆ‘ä»¬çœ‹åˆ°äº†è¿™ä¸ªæ–¹å‘çš„ä»·å€¼å’Œç©ºé—´ã€‚æœ€è¿‘è‡ªå·±ä¹Ÿåœ¨æƒ³å¦‚ä½•ç”¨ LLMs æ¥é©±åŠ¨å·²æœ‰çš„å·¥å…·ï¼Œä½†æ²¡æœ‰æƒ³å¥½ä¸€ä¸ªå¦¥å–„çš„å®ç°æ–¹å¼ã€‚
åŸºäºæ­¤ï¼Œæˆ‘å…ˆè°ƒç ”äº†ä¸‹ Visual ChatGPT, å‘ç°å…¶ä½¿ç”¨äº† LangChain è¿™ä¸ªå·¥å…·ã€‚
å®ƒæœ‰å¼€æºä»£ç ä¸”ç‹¬ç«‹äº LLMsï¼Œ è¯»äº† README, æ„Ÿè§‰å®ƒå¾ˆç¬¦åˆè‡ªå·±çš„æœŸæœ›å•Šã€‚é‚£å°±æ·±åº¦ä¼˜å…ˆï¼Œå…ˆæ¥å­¦ä¹ ä¸‹è¿™ä¸ªå·¥å…·å§ã€‚

## README: ä»€ä¹ˆæ˜¯ LangChain

*âš¡ Building applications with LLMs through composability âš¡*ï¼Œ
ä» LangChain [ä»£ç åº“][_repo]çš„è¿™å¥ç®€ä»‹ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿäº†è§£åˆ°å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼š

- æ˜¯ä¸€ä¸ªåš LLMs ç›¸å…³åº”ç”¨çš„å¼€å‘å·¥å…·
- ä¸»è¦é€šè¿‡ç»„åˆ LLMs å’Œå…¶ä»–å·¥å…·æ¥å®ç°

å›è¿‡å¤´çœ‹ LangChain çš„ Logo: ğŸ¦œï¸ğŸ”—. è¿™æ˜¯ä¸¤ä¸ª emoji å­—ç¬¦ã€‚
ç¬¬ä¸€ä¸ªå½©è‰²é¸Ÿï¼ŒæŸ¥äº†ä¸‹æ˜¯[é¹¦é¹‰(parrot)][_parrot]ï¼Œ
å¯¹åº”åˆ° *Lang(uage)*, åº”è¯¥æ˜¯å–é¹¦é¹‰å¯ä»¥è¯´è¯è¿™ä¸ªç‚¹ï¼Œçªå‡ºè¿™ä¸ªå·¥å…·ä»¥è‡ªç„¶è¯­è¨€ä½œä¸ºäº¤äº’å…¥å£ï¼›
ç¬¬äºŒä¸ªå­—ç¬¦æ˜¯é”é“¾, å¯¹åº”åˆ° *Chain*, ç›´è§‚è¡¨è¾¾äº†ç»„åˆä¸²è”çš„æ€æƒ³ã€‚
è¿™ä¸ªå·¥å…·çš„åå­—å’Œ logoï¼Œè¿˜æ˜¯æŒºæ¸…æ™°ç®€æ´çš„ï¼Œå®Œç¾ä½“ç°äº†äººç±»çš„æ™ºæ…§ï¼ˆä¸ä¼šæ˜¯æœºå™¨å–çš„å§233ï¼‰ã€‚

åœ¨ README é‡Œï¼Œä½œè€…è¯´ LLMs è¿™ç§å˜é©æ€§çš„æŠ€æœ¯è®©å¼€å‘è€…å¯ä»¥åˆ›é€ ä»¥å‰ä¸å¯å®ç°çš„åº”ç”¨ï¼Œä½†æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¯­è¨€æ¨¡å‹ï¼Œè¿˜æ˜¯åŠ›æœ‰ä¸é€®ï¼Œ
ç»™å®ƒåŠ ç‚¹å…¶ä»–æ¥æºçš„è®¡ç®—å’ŒçŸ¥è¯†ï¼Œæ‰èƒ½å®ç°çœŸæ­£çš„å¼ºå¤§ã€‚
LangChain åŸºäºæ­¤åŠ¨æœºï¼Œç€åŠ›äºå¼€å‘å‡ºä¸€å¥—å·¥å…·æ¥è®© LLMs åˆ©ç”¨å¤–éƒ¨èƒ½åŠ›ã€‚è€Œä¸”ï¼Œè¿™ä¸æ˜¯æ„æƒ³ï¼Œå…¶å·²ç»å›´ç»•å‡ ä¸ªè½åœ°ç‚¹åšå‡ºäº†ä¸€äº›ç¤ºä¾‹ï¼š

1. åœ¨ç‰¹å®šæ–‡æ¡£ä¸Šåšé—®ç­”, ä¾‹å­æ˜¯ [Notion-QA][_notion_qa]
2. èŠå¤©æœºå™¨äººï¼Œç¤ºä¾‹ä¸º [ChatLangChain][_chat_langchain]
3. ä»£ç†å·¥å…·(Agent)ï¼Œ Example æ˜¯ [GPT+WolframAlpha](_gpt_wolframalpha). 
   [WolframAlpha][_wolfram] æ˜¯ä¸€ä¸ªåœ¨çº¿é—®ç­”ç³»ç»Ÿï¼Œè¿™ä¸ªä¾‹å­éƒ¨ç½²åœ¨ Huggingface ä¸Šã€‚

æ„Ÿè§‰è¿™å—åšå¾—è¿˜æŒºå¤§çš„ï¼Œä¸è¿‡ç›®å‰ LangChain ç›¸å…³é¡¹ç›®è¿˜æ˜¯æŒ‚åœ¨ hwchase17 è¿™ä¸ªä¸ªäººè´¦æˆ·ä¸‹çš„ï¼Œå‰å®³å•Šï¼

ä»åŠŸèƒ½ç‚¹çš„è§’åº¦çœ‹ï¼Œ LangChain çš„èƒ½åŠ›å¯ä»¥è½åˆ° 6 ä¸ªç‚¹ä¸Šï¼Œç”±ç®€å•åˆ°å¤æ‚ï¼Œä¾æ¬¡ä¸ºï¼š

1. LLMs å’Œ Prompts: åŒ…æ‹¬å¯¹æ‰€æœ‰ LLMs çš„é€šç”¨æ¥å£å°è£…ï¼Œä¸€äº›è°ƒç”¨ LLMs çš„å…¬å…±èƒ½åŠ›ï¼›å¯¹ Prompts çš„ç®¡ç†ã€ä¼˜åŒ–èƒ½åŠ›
2. Chains: å…·å¤‡å°† LLMs å’Œå…¶ä»–å·¥å…·ä¸²è”çš„èƒ½åŠ›ï¼›å¯¹ chains æä¾›äº†æ ‡å‡†æ¥å£ï¼Œæä¾›äº†ä¸€äº›å’Œå…¶ä»–å·¥å…·ç»“åˆçš„ä¸­é—´å±‚ï¼Œ
è¿˜å¯¹å¸¸ç”¨åº”ç”¨é¢„åˆ¶äº†ç«¯åˆ°ç«¯çš„chains.
3. åŸºäºç‰¹å®šæ•°æ®çš„ç”Ÿæˆ(Data Argumented Generation): æ„å»ºäº†ä¸€ä¸ªç‰¹å®šçš„ chain, å…ˆä»ç›®æ ‡æ•°æ®æºé‡Œæ‰¾æ•°æ®ï¼Œ
å†ç»™ LLMs åšç”Ÿæˆã€‚æ¯”å¦‚æŒ‡å®šé•¿æ–‡æ‘˜è¦ã€ç‰¹å®šæ•°æ®ä¸‹çš„é—®ç­”ã€‚
   > æˆ‘ä»¬çœ‹åˆ°ç›®å‰å¾ˆå¤šäº§å“éƒ½æ˜¯è¿™ä¸ªé“¾è·¯ã€‚æ¯”å¦‚ Paper é—®ç­”ï¼Œç”šè‡³ new bing.
4. Agents: æ‰€è°“ Agentï¼Œ å°±æ˜¯è®© LLMs ä½œä¸ºä»£ç†ï¼Œå†³å®šç°åœ¨è¦åšä»€ä¹ˆæ“ä½œã€æ‰§è¡Œæ“ä½œã€å¯¹æ“ä½œç»“æœåšè§£æå¹¶åŸºäºæ­¤ç»“æœåšåç»­æ“ä½œã€‚

   Agent æœ‰å¾ˆå¤šç§ï¼ˆé¢å‘ä¸åŒåœºæ™¯ï¼Œä»åé¢çš„æ–‡æ¡£å¯çŸ¥ï¼Œæœ‰é€šç”¨é—®ç­”åœºæ™¯ã€æ•°å­¦è®¡ç®—åœºæ™¯ç­‰ï¼‰ï¼Œ
   LangChain å®šä¹‰äº†æ ‡å‡†çš„ agent æ¥å£ï¼Œå¹¶æä¾›äº†ä¸€äº›æ ‡å‡† agent ä¾›é€‰æ‹©ï¼Œè¿˜æœ‰ä¸€äº›ç«¯åˆ°ç«¯çš„ agent çš„ä¾‹å­ã€‚
5. Memory: ç”¨æ¥åœ¨ä¸€ç³»åˆ— chains/agents è°ƒç”¨ä¸­ä¿å­˜çŠ¶æ€çš„ã€‚
   LangChain æä¾›äº† memory çš„æ ‡å‡†æ¥å£ï¼Œä¸€ç³»åˆ— memory çš„å®ç°å’Œ chains/agents ä½¿ç”¨ memory çš„ä¾‹å­ã€‚
6. è¯„ä¼°ï¼š ç”Ÿæˆå¼æ¨¡å‹å¾ˆéš¾åšæ•ˆæœè¯„ä¼°ï¼Œä¸€ç§æ–°çš„è¯„ä¼°æ–¹æ³•æ˜¯ç”¨ä»–ä»¬è‡ªå·±å»è¯„ä¼°è‡ªå·±ã€‚
LangChain æä¾›äº†ä¸€äº› prompts/chains æ¥è¾…åŠ©åšè¿™ä¸ªäº‹æƒ…ã€‚

## å¿«é€Ÿå¼€å§‹

åœ¨ [QuickStart guide][_quickstart] æ–‡æ¡£é‡Œï¼Œåˆ—ä¸¾äº†å¿«é€Ÿä¸Šæ‰‹çš„ä¾‹å­ï¼Œè¿™äº›ä¾‹å­å’Œä¸Šé¢æåˆ°çš„åŠŸèƒ½ç‚¹æ˜¯åŸºæœ¬å¯¹åº”çš„ã€‚

1. LLMs: æ„å»ºä¸€ä¸ª LLM çš„å®ä¾‹å¹¶è·å–å…¶è¿”å›ç»“æœã€‚è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œå¯ä»¥è®¤ä¸ºå°±æ˜¯å·²æœ‰ API çš„å°è£…ã€‚
   ä½†è¿™ä¸ªå®ä¾‹æ˜¯åç»­æ­¥éª¤çš„åŸºç¡€(è¢«ç§°ä¸ºæ˜¯ *one primitive*)ã€‚
2. Prompts æ¨¡æ¿ï¼šå®ç°äº†ä¸€ä¸ªæç¤ºæ¨¡æ¿ç±»ã€‚ä¼¼ä¹å°±æ˜¯ `Python str.format` çš„ä¸€ä¸ªå°è£…ï¼Œä½†è¿™åŒæ ·æ˜¯åŸºç¡€æ¨¡å—ã€‚
3. Chains: ç»™çš„ä¾‹å­æ˜¯é¢„å…ˆå®šä¹‰çš„ `LLMChain`ï¼š
   
   ç”¨ `chain = LLMChain(llm=llm, prompt=prompt)` å®ä¾‹åŒ–åï¼Œ
   ç›´æ¥`chain(prompt_input_var)` è°ƒç”¨å°±å¯ä»¥å®Œæˆ 1. æç¤ºæ¨¡æ¿å¡«å…… 2. è¯·æ±‚ LLM å¹¶è¿”å› è¿™ä¸ªä¸¤ä¸ªæ­¥éª¤ã€‚

   çœ‹åˆ°è¿™é‡Œè§‰å¾—è¿˜ OKï¼Œ åªæ˜¯å·¥ç¨‹ä¸Šçš„å°è£…ï¼Œè¿˜æ²¡æœ‰ä½“ç°å‡º LLMs é©±åŠ¨å·¥å…·çš„åŠŸèƒ½ï¼›
   ä¸è¿‡ Chain è¿™ä¸ªç‚¹å·²ç»çœ‹å‡ºæ¥äº†â€”â€”æ˜¯è¦é€šè¿‡å®šä¹‰ç±»æ¥å®ç°çš„ã€‚


[_repo]: https://github.com/hwchase17/langchain "LangChain Github repo"
[_parrot]: https://emojis.wiki/parrot/ "parrot emogis wiki"
[_notion_qa]: https://github.com/hwchase17/notion-qa "notion qa"
[_chat_langchain]: https://github.com/hwchase17/chat-langchain "chat langchain"
[_gpt_wolframalpha]: https://huggingface.co/spaces/JavaFXpert/Chat-GPT-LangChain "Chat-GPT-LangChain"
[_wolfram]: https://www.wolframalpha.com/ "Wolfram Alpha"
[_quickstart]: https://langchain.readthedocs.io/en/latest/getting_started/getting_started.html