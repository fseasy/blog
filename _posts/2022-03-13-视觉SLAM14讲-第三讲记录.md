---
layout: post
title: 视觉SLAM十四讲-第三讲《三维空间刚体运动》阅读笔记
date: 2022-03-13
categories: 技术 
tags: 视觉SLAM十四讲 SLAM
---
> 这章看着好多线代的知识，得补一下。

1. 向量和加减法、内外积，即使坐标系不同，其结果也是一致的。（运算结果与坐标系无关——当然，数值表示时与坐标系有关,
    毕竟表示时就使用了坐标系的基底）

2. 刚体 **旋转矩阵 + 平移向量**，合并到一起，是 **变换矩阵**（位置向量变为四维向量，称为**齐次坐标**）

3. 实战 Eigen (模仿代码+看文档+写）
    
    1. `Matrix3d` 中的 `3d` 不是表示3维矩阵，而是表示 `3 x 3 double`, 对应的还有 `Matrix3f`, 
    `Matrix3i` 等 （分别表示 `float`、 `int`）.

       `Matrix3d`, `Vector3f`, `RowVector3f` 等都是 `Matrix<scalar, N1, N2>` 的宏定义。 

    2. `Eigen::Matrix` 什么时候用动态size（`MatrixX*`），什么时候用静态size（模板参数）?

        显然，如果是运行时才知道，那必然只能用动态size；

        齐次，根据[文档][1]：
        
        矩阵规模小（一般小于等于16），最好用静态的，这样变量都站栈上，快；
        矩阵规模大了（大于32），那也建议用动态的（如可用 `MatrixXd(row, col)` 初始化），因为
        这时用静态的，可能会爆栈。

        > 可知，模板定义的静态参数，是永远在栈上申请的。

    3. 似乎老版本(`3.4`前)，不支持用 `initializer list` 初始化矩阵

        看 [文档][1] 支持使用 initializer list 来做初始化，然而我编译总是报错。

        ```bash
        error: no matching function for call to 
        ‘Eigen::Matrix<int, -1, -1>::Matrix(<brace-enclosed initializer list>)’
        ```
        
        开始以为是CMake没有设置好 `-std=c++11`, 折腾半天还是不行。 search网上，信息好少，找到一个
        [C++ initializer lists for arbitrary length vectors](https://gitlab.com/libeigen/eigen/-/issues/2137)
        看起来说`3.3.9` 还不行；我看了下ubuntu直接装的Eigen3版本，在 
        */usr/include/eigen3/Eigen/src/Core/util/Macros.h*
        下，是 `3.3.7`, 果然不行啊…… 白折腾了。

        > 又去找了下change log, 也没发现有这个改动； 文档里也没有说从什么版本开始支持的…… 一个字，有点坑啊  
        并没有试最新版是否支持——算了，别总在这种细节地方折腾 = =； 老实用comma初始化，不一样吗？ 还少写几个括号呢！


[1]: https://eigen.tuxfamily.org/dox/group__TutorialMatrixClass.html