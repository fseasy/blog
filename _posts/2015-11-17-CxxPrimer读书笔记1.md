---
layout: mathpage
title: C++Primer读书笔记1
date: 2015-11-17
categories: 技术 笔记 
tags: C++ 笔记 C++Primer
onewords: 第四章-表达式。
---
> C++ Primer（第五版）第四章-表达式读书笔记。

> 写在前面：前几天和学弟说好一起刷Primer，最近这几天每天看1、2页，虽然比较少，也不怎么能记住，不过还是觉得很开心。一直在看与记之间平衡，因为记到文档里消耗很多时间，而且其实也没什么效果。只是有时作为装逼的资本，或者是过去时间消耗的痕迹。因为看书时间本来也不多，这里就只记之前没有见过或者不熟悉的。从第四章开始。之前有两章笔记内容写在仓库里，当时花了很多时间来记录，最后不了了之。还是不应该成为负担。

0. 指针不能赋给整型

        int i = &k ;

    会报编译错误！

    所以 

        d = i = ptr = 0 ;

    会报错，但是如下不会报错：

        prt = 0 ;
        d = i = 0 ;


1. 在while循环中使用赋值语句

        while( (i = get_value()) != 42 ){}

2. 复合赋值运算提高性能

        i += 5

    上述`+=`复合赋值运算符变为汇编只需要一次求值操作。

        i = i + 5

    上述非复合赋值，会有两步求值操作！第一步是算`i+5`，第二步是赋值运算。

    所以使用复合赋值运算是可以提高性能的！

3. *ite++被推荐使用
    
        *ite++ ;
        <==> 
        *(ite++) ; 
        <==>
        *ite ;
        ++ite ;

    Primer上说，C++程序是推崇简洁的。

    不过后面又说如果一个赋值语句左右两名都包含同一变量，那么这种写法会带来未定义的可能。

    类似
    
        //想要将字符串转换为大写
        while(*beg)
            *beg = toupper(*beg++) ; 

    这句代码在GCC下应该是能够正常执行的。不过Primer说这可能带来歧义性。不同的编译器可能产生不同的汇编代码。

    老实说，现在有些排斥这种代码简洁不过可能带来一些理解困难甚至歧义的写法。同时，函数名现在也是越写越长。所以看到Primer这么写还是有点为难的。不过，风格问题，也没什么标准~自己喜欢就好。反正，能轻松看懂的代码至少是没有问题的。不过太多冗长也是有些繁琐。所以以后还是要做好权衡啊。

4. 运算符优先级仅针对不同边的运算符。

    如下两种情况：

        ++iter->empty() ;
        iter++->empty() ;

    第一种，会编译错误。因为第一次情况下，会考虑优先级，而成员访问运算符优先级高，先右后左，所以++一个右值就错了。

    第二种因为运算符在同一边，所以就是普通的由左往右的运算了。

    本来还算清晰的东西，放在一起就很容易混淆了。

5. 成员访问符得到的成员大多是左值。

    如

        ++(*iter) ;

    就真的把此位置的东西++了。

    *大多*：书上说，当使用`.`，且对象本身是右值时，访问的成员也是右值。这里有些不是很清楚，毕竟没有亲自试试，不好说。是不是算是一个坑？