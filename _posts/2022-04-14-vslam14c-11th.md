---
layout: post
title: 视觉SLAM十四讲-第十一讲《回环检测》阅读笔记
date: 2022-04-14
categories: 技术 
tags: 视觉SLAM十四讲 SLAM
---
> 回环检测（Loop Closure）判断相机 (agent) 是否曾经到过此刻经过的位置，是在视觉 slam 下消除累计误差的一种重要手段。

1\. 为何需要回环？ 

在引入回环前， SLAM 优化是在一条链上做的，故后一刻的状态预估肯定受前面时刻的影响。随时间推移，这种前面影响后面带来的误差，就是累计误差。在没有引入更多信息的情况下，这种误差难以消除。而回环检测通过判断当前时刻的地点是否曾经来过，进而关联当前帧和历史帧，从而让链表成环。这引入了额外的信息（新的约束），故可以优化估计效果，缓解累计误差。

2\. 基于词袋模型（BOW, Bag of Words) 怎么做回环检测？

回环检测主要通过视觉信息找到与当前时刻最接近的历史帧。这是一个匹配问题。从 ML 的角度看，肯定是要 编码向量 + ANN 检索的。目前（高博写书的时刻）最常见的方法就是用 BOW 方法将图片编码为向量，再用基于树的方式做 ANN 最近邻检索。BOW 理论上应该只是描述编码方法，但书里把这整个流程统称为 BOW 词袋模型，感觉也没啥太大问题吧……

Loop Closure 里的 BOW，和文本分类里的 BOW 其实一样的（不然为啥名都一样呢）。流程为

1. 先基于所有的图片（训练数据，或者大数据集），建一个字典。即确定好向量的定义（多少维、每个维表示什么特征、特征值是 bool 还是浮点、相似度度量方式等）、特征值计算方法
2. 然后对每张图，基于向量定义和特征计算方式，就可以计算输入图片的向量表示
3. 基于定义好的相似度度量，就可以计算向量间相似度，即用来表达原始图片间的相似程度


